name: Incremental Release
description: Create a release based on commit message flags
inputs:
  DRY_RUN:
    description: Simulates a release but does not actually do one
    default: false
  GITHUB_TOKEN:
    description: Token to use to update version in 'package.json' and create GitHub release/tag
    required: true
runs:
  using: composite
  steps:
    - name: Get Version
      run: |
        echo "Getting latest commit..."
        LAST_COMMIT_MESSAGE=$(git log -1 --pretty=%B)
        echo "${LAST_COMMIT_MESSAGE}"
      env:
        GITHUB_TOKEN: ${{ inputs.GITHUB_TOKEN }}
      shell: bash
